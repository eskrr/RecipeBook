<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<link rel="stylesheet" href="../css/application.css">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<title>RecipeBook</title>
		<script>
			window.onload =  async function getRecipes(){
				let response = await fetch("recipes.json")
        		let data = await response.json()
				console.log(data)
				var content = "";
				data.forEach(x => {
					content += `
						<div class="border border-white rounded w-100 mt-4 p-2">
							<div class="d-flex">
								<a id="recipeAuthorImage">
									<img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png" class="profile-pic border rounded-circle m-4">
								</a>
								<div class="">
									<a href="/recipes/show.html?id=${x.id}">
										<h3 id="recipeName">${x.name}</h3>
									</a>
									<strong>By: <span id="recipeAuthorName">${x.author}</span></strong><br>
									<small id="recipeCreatedAt">${parseDate(x.created_at)}</small>
								</div>
							</div>
							<p class="m-2" id="recipeDescription">${x.description}</p>
						</div>
					`
				});
				document.getElementById("recipeDisp").innerHTML = content;
			}

			var parseDate = function parseDate(timestamp) {
			  var date = new Date(timestamp * 1000);
			  console.log(date);
			  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`
			}
		</script>
	</head>
	<body class="bgcolor-secondary">
		<header class="bgcolor-primary">
			<nav class="navbar navbar-light bgcolor-primary justify-content-between">
				<a class="navbar-brand" href="/recipes/index.html">RecipeBook</a>
				<a href="/user/show.html">
					<img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png" class="profile-pic border rounded-circle">
				</a>
			</nav>
		</header>
		<main class="m-4">
			<div class="d-flex">
				<div class="row" id="recipeDisp">
				</div>
			</div>
		</main>
	</body>
</html>